---
layout: post
title: "AMA2-另一个自适应移动平均线"
date: "2017-05-04"
categories:  ["金融", "技术指标"]
---

自适应均线及过滤器设计 当自适应均线拐头向上时，必须使用连续两天的日K线确认趋势，当连续两根日K线均处于自适应均线上方时，方可确认上升趋势。    1.第一根日K线应该从自适应均线的下方向上穿越自适应均线；    2.第二根日K线，不论是阴线还是阳线，均不应跌破自适应均线，这时，可确认股价进入上升趋势。    3.以第一根穿越自适应均线的最高点【或者K线实体的高点】为标准，在后面的3天之内，股价高于这个标准的时候，为买入点。    4.卖出点也是以连续2日的K线低于自适应均线为卖出信号，如果连续两条价格不能收在自适应均线的上方，则必须卖出通过在MACD股票论坛中的交流，对自适应均线的使用做了一些改动。根据网友baifq的建议，采用两条自适应均线，分别适用短周期和长周期。并且对长周期均线做了三色处理。    交易法则：    1、长周期均线为绿色时，不可操作；    2、长周期为蓝色，股价穿越短周期均线时，可建50％的仓位；    3、股价穿越长期均线时，可再建50％仓位；    4、股价跌破短周期均线时，减掉50％仓位；    5、股价跌破长周期均线时，卖出全部股票；    6、长周期均线为红色时，代表持股。短过长,蜡烛线中阳或调空,可买;或短在长上,连续2-3日小阳,成交量短在长上,可买.    以下是修改后的代码：【通达信】   


``` 
DIR1:=ABS(CLOSE-REF(CLOSE,5));    
VIR1:=SUM(ABS(CLOSE-REF(CLOSE,1)),5);
ER1:=DIR1/VIR1;    
CS1:=ER1\*(0.8-2/8)+2/8;    
CQ1:=CS1\*CS1;    
AMA1:EMA(DMA(CLOSE,CQ1),2) ,COLORWHITE;    
DIR2:=ABS(CLOSE-REF(CLOSE,10));    
VIR2:=SUM(ABS(CLOSE-REF(CLOSE,1)),10);    
ER2:=DIR2/VIR2;    
CS2:=ER2\*(0.8-2/24)+2/24;    
CQ2:=CS2\*CS2;    
AMA2:EMA(DMA(CLOSE,CQ2),2),COLORGREEN,LINETHICK2;    
AMA3:IF(AMA2/REF(AMA2,1)>0.997,AMA2,DRAWNULL),COLORBLUE,LINETHICK2;    
AMA4:IF(AMA2/REF(AMA2,1)>1.001,AMA2,DRAWNULL),COLORRED,LINETHICK2;    
```
经过上述修改后，短期均线更适合短线操作，并能为长期趋势提供比较准确的买卖点
