---
layout: post
title: "自适应均线之同花顺版本"
date: "2022-03-10"
categories: ["金融", "技术指标"]
---

 

讲解 ：  [AMA2-另一个自适应移动平均线](http://127.0.0.1/?p=43)

```
DIR:=ABS(CLOSE-REF(CLOSE,N));
VIR:=SUM(ABS(CLOSE-REF(CLOSE,1)),N); 
ER:=DIR/VIR; 
CS:=ER*(2/3-2/(N+1))+2/(N+1);;
CQ:=CS*CS;
MAN:EMA(DMA(CLOSE,CQ),2),colorgreen;

MANUP:IF(MAN>REF(MAN,1),MAN,DRAWNULL),colorred,LINETHICK4,POINTDOT;
MAN3:IF(MAN=REF(MAN,1),MAN,DRAWNULL),colorwhite,LINETHICK4,POINTDOT;
MANDOWN:IF(MAN<REF(MAN,1),MAN,DRAWNULL),colorgreen,LINETHICK4,POINTDOT;
```

 

 

 

如下是卡夫曼自适应均线

解析： [AMA-自适应移动平均线](http://127.0.0.1/?p=38)

```
DIRECTION:=CLOSE-REF(CLOSE,10);
VOLATILITY:=SUM(ABS((CLOSE-REF(CLOSE,1))),10);
ER:=ABS(DIRECTION/VOLATILITY);
FASTSC:=2/(2+1);
SLOWSC:=2/(30+1);
SSC:=ER*(FASTSC-SLOWSC)+SLOWSC;
CONSTANT:=SSC*SSC;
AMA:EMA(DMA(CLOSE,CONSTANT),2),colorgreen;
FIL:=STD(AMA-REF(AMA,1),20);
AMA2:IF(AMA-LLV(AMA,3)>FIL*0.1,AMA,DRAWNULL),colorred,LINETHICK4,POINTDOT;
AMA3:IF(AMA-LLV(AMA,3)<FIL*0.1,AMA,DRAWNULL),colorgreen,LINETHICK4,POINTDOT;
```

 

如上2个实际上是一个，区别在于 ：

```
FASTSC:=2/(2+1); 
SLOWSC:=2/(30+1); 
SSC:=ER*(FASTSC-SLOWSC)+SLOWSC;
```
