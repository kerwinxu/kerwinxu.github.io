---
layout: post
title: "AMA-自适应移动平均线"
date: "2017-05-04"
categories:  ["金融", "技术指标"]
---

短期均线贴近价格走势，灵敏度高，但是有很多杂音，会产生虚假信号。 长期均线可以比较准确的判断趋势，但有严重的滞后性。 自适应均线，当价格沿一个方向快速移动时，用短期均线。当价格在横盘时，用长期均线。

这个卡夫曼自适应移动均线 AMA=ref(AMA,1)+C\*(close-ref(AMA,1)) ，是根据指数移动平均线改的，EMA=ref(EMA,1)+C\*(PRICE-ref(EMA,1))，C=2/(N+1)，重要的是c这个系数，要完成抗干扰和滞后性这个效果，当价格快速单边移动时，就赋予短周期指数均线的系数，比如2/(2+1)，当价格在横盘的时候，将c赋值给长周期指数均线的系数就可以了，比如2/(30+1)。

1. 测定价格的速率，效率系数,ER
    1. 计算每个周期价格变动的累加=sum(abs(close-ref(close,1)),n);
    2. 计算每个周期价格总体的变动=abs(close-ref(close,n))
    3. 变动速率ER=每个周期的总体变动/每个周期变动的累加
2. 变换效率系数为趋势速度，假设N1=2天，N2=30天
    1. 短周期：$ fastest=2/(N1+1)=2/3=0.6667$
    2. 长周期：$ slowest=2/(N2+1)=2/31=0.0645$
    3. 趋势速度：$ smooth=ER*(fastest-slowest)+slowest$
    4. 趋势速度$ C=smooth*smooth$ , 平方之后，更平滑了。
3. 计算自适应均线,这个是根据指数移动平均值（EXPMA）来适应的。
    1. $ AMA=ref(AMA,1)+C*(close-ref(AMA,1))$
4. 自调节式过滤器 。
    1. 要求：为了与自适应均线一致，当价格波动变得更多或者更少时，过滤器也要取相应的较大或者较少值。
    2. 这个所谓的过滤器就是一个标准差，跟布林线差不多的一个标准差。
    3. 计算方法：$ percentage*std(AMA-ref(AMA,1), n)$ ;
        1. percentage:为手动设置的一个系数。
        2. std(AMA-ref(AMA,1), n) ： n个周期的标准差

如上文章的公式如下：
```
DIRECTION:=CLOSE-REF(CLOSE,10);
VOLATILITY:=SUM(ABS((CLOSE-REF(CLOSE,1))),10);
ER:=ABS(DIRECTION/VOLATILITY);
FASTSC:=2/(2+1);
SLOWSC:=2/(30+1);
SSC:=ER\*(FASTSC-SLOWSC)+SLOWSC;
CONSTANT:=SSC\*SSC;
AMA:EMA(DMA(CLOSE,CONSTANT),2),COLORGREEN;
FIL:=STD(AMA-REF(AMA,1),20);
PARTLINE(AMA-LLV(AMA,3)>FIL\*0.1,AMA,COLORMAGENTA);
```

交易法则

1. 卡夫曼的做法
    1. 当收盘价突破自适应均线的时候，买入。
    2. 当收盘价跌破自适应均线的时候，卖出。
2. 另一种做法
    1. 当收盘价图片自适应均线的时候，必须用连续2日的K线确定趋势。
        1. 第一个K线应该是从自适应均线下方突破自适应均线。
        2. 第二根K线，不论阴线或者阳线，均不能跌破自适应均线，这时，可以确定上升趋势。
        3. .以第一根穿越自适应均线的最高点【或者K线实体的高点】为标准，在后面的3天之内，股价高于这个标准的时候，为买入点。
    2. 卖出点：连续2日的K线低于自适应均线为卖出信号，如果连续两条价格不能收在自适应均线的上方，则必须卖出。
