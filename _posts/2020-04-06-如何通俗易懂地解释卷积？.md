---
layout: post
title: "如何通俗易懂地解释卷积？"
date: "2020-04-06"
categories: 
  - "数学"
---

# 前言

从数学上看，卷积就是一种运算。

某种运算，能够被定义出来，至少有如下的特征：

- 首先是抽象的，符号化的。
- 其次，在生活、科研中，有着广泛的应用。

比如加法

- $ a+b$，是抽象的，本身就是一种符号，
- 现实中，有非常多的意义，比如增加，合成等。

# 卷积的定义

我们称 $ (f\*g)(n)为f,g$的卷积

其连续的定义为：

$$ (f\*g)(n)=\\int\_{-\\infty}^{\\infty} f(\\tau)g(n-\\tau)\\ d\\tau$$

其离散的定义为：

$$ (f\*g)(n)=\\sum\_{\\tau=-\\infty}^{\\infty} f(\\tau)g(n-\\tau)\\ d\\tau$$

这两个公式有一个共同的特征，

[![no img]](http://127.0.0.1/?attachment_id=4258)

这个特征有什么意义呢

我们令 $ x = \\tau , y = n - \\tau , 那么 x+y = n$ 就是下面这条直线。

[![no img]](http://127.0.0.1/?attachment_id=4259)

如果遍历这些直线，就好比，把毛巾沿着角卷起来。

 

卷积为什么叫卷，这里就可以看到了，

 

# 例子

## 丢骰子

我有两枚骰子：

 

求两枚骰子点数加起来等于4的概率是多少？

这里问题的关键是，两个骰子加起来要等于4，这正是卷积的应用场景。

我们把骰子各个点数的概率表示出来。

[![no img]](http://127.0.0.1/?attachment_id=4502)

那么，两枚骰子点数加起来为4的情况有

[![no img]](http://127.0.0.1/?attachment_id=4503)

[![no img]](http://127.0.0.1/?attachment_id=4505)

[![no img]](http://127.0.0.1/?attachment_id=4506)

因此，两枚骰子点数加起来等于4的概率为

$$f(1)g(3)+f(2)g(2)+f(3)g(1)$$

符合卷积的定义，把它写成标准的形式是：

$$(f\*g)(4) = \\sum\_{m=1}^{3} f(4-m)g(m)$$

##  做馒头

楼下早点铺子做馒头，假设馒头的生产速度是$ f(t)$,那么一天后生产出来的馒头总量为：

$$\\int\_{0}^{24}f(t)\\ dt$$

馒头做出来之后就会慢慢腐败，假设腐败函数为 $ g(x)$,比如10个馒头，24个小时就会腐败：

$$10\*g(t)$$

想想就知道，第一个小时生产出来的馒头，一天会经历24个小时的腐败，第二个小时生产出来的馒头，一天后会经理23个小时的腐败。

如此，我们知道，一天后，馒头总共腐败了：

$$\\int\_{0}^{24} f(t)g(24-t)\\ dt $$

这就是连续的卷积

## 图像处理

### 原理

有这么一副图像，可以看到，图像上有很多噪点

[![no img]](http://127.0.0.1/?attachment_id=4507)

高频信号，就好比平地耸立的高峰。

 

看起来很显眼，

平滑高峰的方法是，把高峰刨去一些土，填到山峰周围去，用数学的画来说，就是把山峰周围的高度平均一下，

平滑后得到：

[![no img]](http://127.0.0.1/?attachment_id=4508)

### 计算

卷积可以帮助实现这种平滑算法。

有噪声的原图，我们可以把它转化为一个矩阵

[![no img]](http://127.0.0.1/?attachment_id=3309)

然后用下面的这个平均矩阵（说明下，原图处理实际上用的是正态分布矩阵，这里为了简单，就用算术平均矩阵）来平滑图像

$$g=\\left\[\\begin{matrix} & \\frac{1}{9}  & \\frac{1}{9}  & \\frac{1}{9}\\\\ & \\frac{1}{9}  & \\frac{1}{9}   & \\frac{1}{9}\\\\ & \\frac{1}{9}  & \\frac{1}{9}   & \\frac{1}{9} \\end{matrix}\\right\]$$

记住刚才的算法，把高频信号和周围的数值平均一下就可以平滑山峰。

比如我要平滑 $ a 1,1$点，就在矩阵中，取出这个点附近的点组成矩阵f,和g进行卷积计算后再填回去。

[![no img]](http://127.0.0.1/?attachment_id=4509)

要注意一点，为了运用卷积，g虽然和f同维度，但下标不一样。

[![no img]](http://127.0.0.1/?attachment_id=4510)

用一个动图来显示计算过程

[![no img]](http://127.0.0.1/?attachment_id=4255)

写成卷积公式就是

$$(f\*g)(1,1)=\\sum\_{k=0}^{2}\\sum\_{h=0}^{2}f(h,k)g(1-h,1-k)$$

如下这样就实现了g这个矩阵在原先图片上的划动（准确的说，下面这幅图把g矩阵旋转了180度）

[![no img]](http://127.0.0.1/?attachment_id=4257)

 

# 引用

- 如[何通俗易懂地解释卷积？](https://www.zhihu.com/question/22298352)
