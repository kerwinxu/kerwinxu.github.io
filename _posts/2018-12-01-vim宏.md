---
layout: post
title: "vim宏"
date: "2018-12-01"
categories: 
  - "vim"
---

# 前言

重复操作而已

# 详细操作

normal 模式下按q，然后再加一个键，比如t，就是t寄存器，打开录制之后，左下角出现了 `recording @t` 的字样，这样就开启了宏录制，直到再次按q，结束宏录制。我们暂且称之为：宏存储在 t 寄存器中，你想使用那一段宏的时候，只需要按下 `@t` 就可以了，如果你要循环 100 次数，就执行 `100@t`，如果想使用其他的键（比如 abcd）也是可以的。

# 例子

接下来是操作演示，我这里已经写了一个 50000 行的文本文件，我现在要使用宏在每一行的后面加上一个英文句号：

操作分解：

## 第一步

vim test

用 vim 打开一个名为 test 的文件，它里面已经有 50000 行内容了

## 第二步

我在文件的顶部加了一个空行，这样子做是因为我想要循环执行在每一行后面加句号这个动作，那我得一行行衔接下去，所以我把光标一开始定位在那个空行里面，这样我的第一个动作就是要到下一行，这样我就可以循环往下执行了

## 第三步

qt

打开宏录制，我用的还是 t ，打开录制之后，左下角出现了 recording @t 的字样，说明已经开始录制了。然后我就先到下一行，然后在末尾加了一个句号，最后再次按下 q 键，录制完毕，这样我的宏就做好了，t 寄存器里面保存的操作就是：

下一行 -> 光标定位到行尾 -> 进入 insert 模式 -> 输入句号 -> ESC

翻译成 vim 的操作就是：

j$a. 或 jA.

## 第四步

现在就可以调用了，我调用了三次

10@t

100@t

1000@t

我先循环调用 10 次宏，来试一下录制的对不对，发现录制正确之后，再调用了 100 次，也是完全正确的，最后我调用了 1000 次，执行有点慢，cpu 被吃了很多，但还是正确执行了。其实我们可以在宏的录制中给 10 行加句号，这样调用 1000 次会快一点，我这里只是演示而已，就不去折腾了。 --------------------- 作者：JoiT 来源：CSDN 原文：https://blog.csdn.net/MyJoiT/article/details/82085499 版权声明：本文为博主原创文章，转载请附上博文链接！
